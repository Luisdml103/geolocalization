<!-- @license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->

<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/byutv-jsonp/byutv-jsonp.html" />
<link rel="import" href="../../bower_components/google-map/google-map.html">

<dom-module id="my-ajaxelement">
   <template>
	 <iron-ajax 
	   auto
          id="ajax"
          verbose="true"          
          url="http://172.21.6.253:8081/maps/api/geocode/json"
	  params="{{options}}"
	            
          on-response="handleResponse"
          last-response="{{ajaxResponse}}"
	  handle-as="json"
          
	   >
          </iron-ajax>

   <p><span>{{ajaxResponse.lat}}</p></span>     
   <br>
   <p><span>{{ajaxResponse.lng}}</p></span>

   <style>
   google-map {
          height: 600px;
          }
   </style>
   <google-map  latitude="[[ajaxResponse.lat]]" longitude="[[ajaxResponse.lng]]" zoom=17>
   <google-map-marker latitude="[[ajaxResponse.lat]]" longitude="[[ajaxResponse.lng]]"
      title="Interesection" draggable="true"></google-map-marker>

	</google-map>
       
  </template> 
  <p><span>{{ajaxResponse.lat}}</p></span>
   <br>
   <p><span>{{ajaxResponse.lng}}</p></span>

</dom-module>
<script>
(function() {
  Polymer({
    is: 'my-ajaxelement',

    properties: {
	street1: {
		value: 'Av Pando',
		notify: true
	},
        street2: {
		value: 'Av America',
		notify: true
	},
	
	options: {
		computed: 'computeOptions(street1, street2)'
	}
      },
    
  
    
    computeOptions: function(street1, street2){
	var streets = street1 + ' esq ' + street2 + ' cochabamba BO';
	return {address: streets}; 
	},
	
    handleResponse: function () {
     console.log('handleResponse');
    },
    
    getData: function () {
        console.log('get data working');
	          
	
    }


  });
})();
</script>
